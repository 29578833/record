
## 什么是作用域链

查找一个变量时，会先在当前上下文中的变量中查找，没找到就会向父级上下文中的变量对象查找，
一直查找到全局上下文中，这样由多个执行上下文的变量对象构成的链表就叫作用域链。

作用域链在函数创建、调用时会有所变化。

* 函数创建阶段（声明、定义阶段）

在函数中有一个内部属性[[scope]],当函数创建时，就会保存所以父级的变量对象VO（活动对象AO）,
这个阶段[[scope]]就是所以父级变量对象的层级表，此时[[scope]]不包含当前上下中的变量对象，所以并不是
完整的作用域链。

例子：
```js
function foo(){
    function bar(){

    }
}
```
此时foo、bar的[[scope]]为：
```js
foo.[[scope]] = [
    globalContext.VO
]

bar.[[scope]] = [
    fooContext.AO,
    globalContext.VO
]
```

* 函数调用阶段
  
当函数被激活时，进入函数上下文创建VO/AO，就将当前函数的变量对象复制到到作用域顶端。

此时的执行上下文中的作用域链为：
```js
Scope = [this.AO].concat([[Scope]]) //[[Scope]]=>函数创建时的作用域链
```